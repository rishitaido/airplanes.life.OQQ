<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Airport Explorer (MapLibre v5)</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <script src='https://unpkg.com/maplibre-gl@5.6.0/dist/maplibre-gl.js'></script>
  <link rel='stylesheet' href='https://unpkg.com/maplibre-gl@5.6.0/dist/maplibre-gl.css' />

  <script>
    window.MAPTILER_KEY = "{{ maptiler_key }}";
  </script>

  <script type="module" src="{{ url_for('static', filename='maplibre.js') }}"></script>
  <script type="module" src="{{ url_for('static', filename='globe-tools.js') }}"></script>
</head>

<body class="page-map">

  <!-- Merged header -->
  <header class="subheader" style="display: flex; flex-wrap: wrap; gap: 0.5rem; align-items: center; padding: 0.75rem;">
    <a class="btn-dark" href="{{ url_for('index') }}">‚Üê Back to Home</a>
    <button id="toggle-view" class="btn-dark">Switch to Flat Map </button>
    <button id="toggle-airports" class="btn-dark">Hide Airports</button>
    <button id="toggle-restaurants" class="btn-dark">Show Restaurants </button>
    <button id="toggle-attractions" class="btn-dark">Show Attractions </button>
    <input id="globe-search" placeholder="Search IATA / city"
           style="width: 220px; padding: 0.4rem 0.6rem; border-radius: 6px; border: 1px solid #ccc;" />
  </header>

  <!-- Map -->
  <div id="map" style="width: 100%; height: calc(100vh - 80px);"></div>

  <!-- Sticky Itinerary Sidebar -->
  <aside id="map-sidebar" class="map-sidebar">
    <h3>Your Itinerary</h3>
    <div id="sticky-itinerary"></div>
  </aside>

  <!-- AI Assistant Button -->
  <button id="ai-map-chat" class="floating-chat">AI </button>

  <!-- AI Assistant Chat Box -->
  <div id="map-chat-box" class="chat-box hidden">
    <textarea id="map-chat-input" placeholder="Ask about an address..."></textarea>
    <button id="map-chat-send">Send</button>
    <div id="map-chat-response"></div>
  </div>

</body>
</html>
