<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Trip Itinerary Viewer</title>

  <!-- âœ… Stylesheets: Load Bootstrap overrides first, then main styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-override.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="floating-chat">
  <!-- ğŸ§­ Page Header -->
  <header>
    <h1>ğŸ—ºï¸ Trip Itinerary Viewer</h1>
  </header>

  <!-- ğŸ› ï¸ Main Builder + Itinerary Layout -->
  <main style="max-width: 800px; margin: 0 auto; display: block;">
    
    <!-- ğŸ“‹ Itinerary Builder Form -->
    <section id="itinerary-builder" class="card" style="margin-bottom:1rem;">
      <h2>ğŸ“ Build your itinerary</h2>
      <form id="itinerary-form">
        <label>
          City
          <input type="text" name="city" placeholder="e.g. Rome" required />
        </label>
        <label>
          Days
          <input type="number" name="days" min="1" max="14" value="3" required />
        </label>
        <label>
          Theme
          <select name="theme">
            <option>Food & Culture</option>
            <option>Nature & Outdoors</option>
            <option>Museums & History</option>
            <option>Luxury & Relaxation</option>
          </select>
        </label>

        <!-- ğŸš€ Action Buttons -->
        <button id="build-btn" type="submit">Generate</button>
        <span id="build-spinner" hidden>â³</span>
        <button type="button" id="save-btn" hidden>ğŸ’¾ Save</button>
      </form>
    </section>

    <!-- ğŸ“„ AI-Generated Itinerary Output -->
    <div style="overflow-y: auto; max-height: 70vh;">
      <section id="viewer-output" class="card" style="padding: 1rem;">
        <!-- JS will dynamically inject collapsible day sections here -->
      </section>
    </div>
  </main>

  <!-- ğŸ’¬ Hidden Chat Interface for future AI interaction -->
  <section id="chat-ui" class="chat-ui hidden">
    <div id="chat-container" class="chat-container"></div>
    <div id="input-area" class="input-area">
      <input type="text" id="chat-input" placeholder="Ask TripMate..." />
      <button id="send-button">Send</button>
    </div>
    <button id="open-itinerary" hidden>View Saved Itinerary</button>
  </section>
  
  <!-- ğŸ”™ Navigation Back to Home -->
  <p style="margin-top:1rem">
    <a class="cta-secondary" href="{{ url_for('index') }}">â† Back to HomePage</a>
  </p>

  <!-- ğŸ“¦ JavaScript Modules -->
  <script type="module" src="{{ url_for('static', filename='viewer.js') }}"></script>
  <script type="module" src="{{ url_for('static', filename='travel-tools.js') }}"></script>
  <script type="module" src="{{ url_for('static', filename='itinerary-display.js') }}"></script>
  <script type="module" src="{{ url_for('static', filename='chat.js') }}"></script>

  <!-- ğŸ§  Chat UI Toggle Logic -->
  <script>
    document.getElementById("chat-toggle")?.addEventListener("click", () => {
      document.getElementById("chat-ui")?.classList.toggle("hidden");
    });
  </script>
</body>
</html>
